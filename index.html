<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot de Atendimento</title>
    <link rel="icon" href="img/chatbot.png">
    <link rel="stylesheet" href="css/styles.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#007bff">
    </head>
<body>

<header>
    <img src="img/logo.png" alt="logon" id="logo">
</header>
    <div id="chat-container">
        <div id="output">
    <video autoplay muted loop id="background-video">
        <source src="video/conscienciencia.mp4" type="video/mp4">
        Seu navegador n√£o suporta v√≠deos em HTML5.
    </video>
</div>

<!-- Bot√£o para instalar o app PWA -->
<button id="installBtn" style="display: none;">Instalar Aplicativo</button>

        <div id="userInputContainer">
            <textarea id="userInput" placeholder="Digite sua mensagem..."></textarea>
<button id="sendBtn">Enviar</button><button id="clearBtn">Limpar Conversa</button>
        </div>
    </div>

<!-- Bot√£o para abrir o tutorial -->
<button id="openTutorialBtn">‚ùì Como Usar?</button>

<!-- Modal do Tutorial -->
<div id="tutorialModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
  <h2>üìñ Tutorial do Chatbot de Atendimento</h2>

        <h3>1Ô∏è‚É£ Consultando sua data Vencimento</h3>
        
        <p>Para saber sua data de vencimento, digite: <strong>Data de vencimento</strong>
        e siga as instru√ß√µes.</p>

        <h3>2Ô∏è‚É£ Voce que √© revendedor e esqueceu seu usuario e senha</h3>
        <p>Digite: <strong>Esqueci a senha do painel</strong> e siga as instru√ß√µes.</p>
        
        <h3>3Ô∏è‚É£ Tabela de credito para revenda</h3>
        <p>Digite: <strong>Tabela de credito</strong></p>

<h3>4Ô∏è‚É£ Se ainda n√£o √© um revendedor</h3>
        <p>Digite: <strong>Quero ser um revendedor</strong></p>

      <h3>5Ô∏è‚É£ Planos e Pre√ßos</h3>
     <p>Digite: <strong>Quais os planos </strong></p>

<h3>6Ô∏è‚É£ Renova√ß√£o e Pagamentos</h3>
        <p>Digite: <strong>Quero renovar minha assinatura</strong></p>

<h3>7Ô∏è‚É£ Caso queira um teste</h3>
      <p>Digite: <strong>Quero um teste</strong></p>       
        
        
        <h3>8Ô∏è‚É£ Suporte</h3>
        <p><a href="https://wa.me/5581982258462?text=Ol√°,%20preciso%20de%20ajuda!" target="_blank">Clique aqui para falar com o suporte</a>.</p>
    </div>
</div>

    <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<!-- Inicializa√ß√£o do Firebase -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCw38sezt3TWmFIuUXFD3mPAj2ZPF6ZD4o",
    authDomain: "gerenciador-eeb96.firebaseapp.com",
    databaseURL: "https://gerenciador-eeb96-default-rtdb.firebaseio.com",
    projectId: "gerenciador-eeb96",
    storageBucket: "gerenciador-eeb96.firebasestorage.app",
    messagingSenderId: "560345055072",
    appId: "1:560345055072:web:9048475b7ac90a7f43e805"
  };
  firebase.initializeApp(firebaseConfig);
</script>

<script>
// Abrir o modal
document.getElementById("openTutorialBtn").addEventListener("click", function () {
    document.getElementById("tutorialModal").style.display = "block";
});

// Fechar o modal quando clicar no "X"
document.querySelector("#tutorialModal .close").addEventListener("click", function () {
    document.getElementById("tutorialModal").style.display = "none";
});

// Fechar o modal ao clicar fora da √°rea do conte√∫do
window.addEventListener("click", function (event) {
    const modal = document.getElementById("tutorialModal");
    if (event.target === modal) {
        modal.style.display = "none";
    }
});
</script>

<script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("service-worker.js")
        .then(reg => console.log("Service Worker registrado!", reg))
        .catch(err => console.error("Erro ao registrar o Service Worker:", err));
    });
  }
  
  //botao de instala√ß√£o PWA
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');

  // Escutar o evento antes do prompt de instala√ß√£o
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault(); // Impede que o prompt apare√ßa automaticamente
    deferredPrompt = e;
    installBtn.style.display = 'block'; // Mostra o bot√£o
  });

  // Quando o usu√°rio clicar no bot√£o
  installBtn.addEventListener('click', async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      if (outcome === 'accepted') {
        console.log('Usu√°rio aceitou instalar o PWA');
      } else {
        console.log('Usu√°rio recusou a instala√ß√£o');
      }
      deferredPrompt = null;
      installBtn.style.display = 'none'; // Oculta o bot√£o ap√≥s a tentativa
    }
  });

  // Oculta o bot√£o se o app j√° estiver instalado
  window.addEventListener('appinstalled', () => {
    console.log('PWA instalado com sucesso');
    installBtn.style.display = 'none';
  });
</script>

<script src="js/script.js"></script>
</body>
</html>